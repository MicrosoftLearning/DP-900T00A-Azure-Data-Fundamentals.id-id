---
ms.openlocfilehash: 34b661fbb1237d51bdab932626d19518225841a0
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: id-ID
ms.lasthandoff: 02/05/2022
ms.locfileid: "138051957"
---
<a name="are-we-there-yet"></a>are-we-there-yet
----------------

Lacak hierarki kompleks status penyelesaian tugas asinkron.  Ini dimaksudkan untuk memberi Anda cara merekam dan melaporkan progres penyebaran besar rekursif dan mengumpulkan jenis alur kerja yang sangat umum dalam asinkron.

Apa yang Anda lakukan dengan data penyelesaian ini terserah Anda, tetapi kasus penggunaan yang paling umum adalah memasukkannya ke salah satu dari banyak modul bilah progres.

Sebagian besar modul bilah progres menyertakan versi dasar ini, tetapi kebutuhan saya lebih kompleks.

<a name="usage"></a>Penggunaan
=====

```javascript
var TrackerGroup = require("are-we-there-yet").TrackerGroup

var top = new TrackerGroup("program")

var single = top.newItem("one thing", 100)
single.completeWork(20)

console.log(top.completed()) // 0.2

fs.stat("file", function(er, stat) {
  if (er) throw er  
  var stream = top.newStream("file", stat.size)
  console.log(top.completed()) // now 0.1 as single is 50% of the job and is 20% complete
                              // and 50% * 20% == 10%
  fs.createReadStream("file").pipe(stream).on("data", function (chunk) {
    // do stuff with chunk
  })
  top.on("change", function (name) {
    // called each time a chunk is read from "file"
    // top.completed() will start at 0.1 and fill up to 0.6 as the file is read
  })
})
```

<a name="shared-methods"></a>Metode Bersama
==============

* var completed = tracker.completed()

Diimplementasikan di: `Tracker`, `TrackerGroup`, `TrackerStream`

Mengembalikan rasio pekerjaan yang diselesaikan dengan pekerjaan yang harus dilakukan. Rentang 0 hingga 1.

* tracker.finish()

Diimplementasikan di: `Tracker`, `TrackerGroup`

Menandai pelacak sebagai selesai. Dengan TrackerGroup ini menandai semua komponennya sebagai selesai.

Menandai semua komponen pelacak ini sebagai selesai, yang berarti `tracker.completed()` untuk ini sekarang menjadi 1.

Komponen ini akan menghasilkan satu atau lebih `change` peristiwa yang dikirimkan.

<a name="events"></a>Acara
======

Semua objek pelacak mengirimkan `change` peristiwa dengan argumen berikut:

```
function (name, completed, tracker)
```

`name` adalah nama pelacak yang awalnya mengirimkan peristiwa, atau jika tidak memilikinya, grup pelacak berisi pertama yang memilikinya.

`completed` adalah persentase lengkap (seperti yang dikembalikan oleh metode `tracker.completed()`).

`tracker` adalah objek pelacak tempat Anda mendengarkan acara.

<a name="trackergroup"></a>TrackerGroup
============

* var tracker = new TrackerGroup(**name**)

  * **nama** *(opsional)* - Nama grup pelacak ini, digunakan dalam pemberitahuan perubahan jika pembaruan komponen tidak memiliki nama. Default untuk tidak ditentukan.

Membuat grup agregasi pelacak kosong baru. Grup ini adalah pelacak yang status penyelesaiannya ditentukan oleh status penyelesaian pelacak lainnya.

* tracker.addUnit(**otherTracker**, **weight**)

  * **otherTracker** - Salah satu objek pelacak are-we-there-yet lainnya
  * **weight** *(opsional)* - Bobot yang akan diberikan kepada pelacak, defaultnya adalah 1.

Menambahkan **otherTracker** ke grup agregasi ini. Bobot menentukan berapa lama Anda mengharapkan pelacak ini untuk menyelesaikan secara proporsional dengan unit lain.  Jadi misalnya, jika Anda menambahkan satu pelacak dengan bobot 1 dan pelacak lainnya dengan bobot 2, Anda mengatakan bahwa yang kedua akan membutuhkan waktu dua kali lebih lama untuk diselesaikan daripada yang pertama.  Dengan demikian, yang pertama akan menyumbang 33% dari penyelesaian pelacak ini dan yang kedua akan menyumbang 67% lainnya.

Mengembalikan **otherTracker**.

* var subGroup = tracker.newGroup(**name**, **weight**)

Di atas persis sama dengan:

```javascript
  var subGroup = tracker.addUnit(new TrackerGroup(name), weight)
```

* var subItem = tracker.newItem(**name**, **todo**, **weight**)

Di atas persis sama dengan:

```javascript
  var subItem = tracker.addUnit(new Tracker(name, todo), weight)
```

* var subStream = tracker.newStream(**name**, **todo**, **weight**)

Di atas persis sama dengan:

```javascript
  var subStream = tracker.addUnit(new TrackerStream(name, todo), weight)
```

* console.log( tracker.debug() )

Menampilkan pohon yang menunjukkan penyelesaian grup pelacak ini dan semua turunannya, termasuk memasukkan semua turunan secara rekursif.

<a name="tracker"></a>Pelacak
=======

* var tracker = new Tracker(**name**, **todo**)

  * **nama** *(opsional)* Nama penghitung ini untuk melaporkan peristiwa perubahan.  Default untuk tidak ditentukan.
  * **yang harus dilakukan** *(opsional)* Jumlah pekerjaan yang harus dilakukan (angka). Default ke 0.

Biasanya ini dibuat sebagai bagian dari grup pelacak (melalui `newItem`).

* var completed = tracker.completed()

Mengembalikan rasio pekerjaan yang diselesaikan dengan pekerjaan yang harus dilakukan. Rentang 0 hingga 1. Jika total pekerjaan yang harus dilakukan adalah 0 maka akan menghasilkan 0.

* tracker.addWork(**todo**)

  * **todo** Angka untuk menambah jumlah pekerjaan yang harus dilakukan.

Meningkatkan jumlah pekerjaan yang harus dilakukan, sehingga mengurangi persentase penyelesaian.  Memicu peristiwa `change`.

* tracker.completeWork(**completed**)

  * **selesai** Angka yang akan ditambahkan ke pekerjaan yang selesai

Meningkatkan jumlah pekerjaan yang diselesaikan, sehingga meningkatkan persentase penyelesaian.
Tidak akan pernah menambah pekerjaan yang diselesaikan melewati jumlah pekerjaan yang harus dilakukan. Artinya, persentase > 100% tidak diizinkan. Memicu peristiwa `change`.

* tracker.finish()

Tandai pelacak ini sebagai selesai, tracker.completed() sekarang akan menjadi 1. Memicu peristiwa `change`.

<a name="trackerstream"></a>TrackerStream
=============

* var tracker = new TrackerStream(**name**, **size**, **options**)

  * **nama** *(opsional)* Nama penghitung ini untuk melaporkan peristiwa perubahan.  Default untuk tidak ditentukan.
  * **size** *(opsional)* Jumlah byte yang dikirim melalui aliran ini.
  * **options** *(opsional)* Hash opsi aliran

Objek aliran pelacak adalah aliran lintasan yang memperbarui objek pelacak internal setiap kali blok diteruskan.  Ini dimaksudkan untuk melacak unduhan, ekstraksi file, dan aktivitas terkait lainnya. Anda menggunakannya dengan menyalurkan sumber data Anda ke dalamnya dan kemudian menggunakannya sebagai sumber data Anda.

Jika data Anda memiliki atribut panjang, atribut tersebut digunakan sebagai jumlah pekerjaan yang diselesaikan saat gugus diteruskan.  Jika tidak (misalnya, aliran objek), setiap gugus dihitung sebagai menyelesaikan 1 unit pekerjaan, jadi ukuran Anda harus menjadi jumlah total objek yang dialirkan.

* tracker.addWork(**todo**)

  * **todo** Tingkatkan ukuran keseluruhan yang diharapkan sebesar **todo** byte.

Meningkatkan jumlah pekerjaan yang harus dilakukan, sehingga mengurangi persentase penyelesaian.  Memicu peristiwa `change`.
