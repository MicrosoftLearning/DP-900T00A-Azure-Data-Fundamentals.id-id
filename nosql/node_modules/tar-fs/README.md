---
ms.openlocfilehash: 841a4ef811cc186a2302309fbbc4a380d1ba5cbd
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: id-ID
ms.lasthandoff: 02/05/2022
ms.locfileid: "138050945"
---
# <a name="tar-fs"></a>tar-fs

pengikatan sistem file untuk [tar-stream](https://github.com/mafintosh/tar-stream).

```
npm install tar-fs
```

[![status build](https://secure.travis-ci.org/mafintosh/tar-fs.png)](http://travis-ci.org/mafintosh/tar-fs)

## <a name="usage"></a>Penggunaan

tar-fs memungkinkan Anda mengemas direktori ke dalam tarball dan mengekstrak tarball ke dalam direktori.

Itu bukan gunzip untuk Anda, jadi jika Anda ingin mengekstrak `.tar.gz` dengan ini, Anda harus menggunakan sesuatu seperti [gunzip-maybe](https://github.com/mafintosh/gunzip-maybe) sebagai tambahannya.

``` js
var tar = require('tar-fs')
var fs = require('fs')

// packing a directory
tar.pack('./my-directory').pipe(fs.createWriteStream('my-tarball.tar'))

// extracting a directory
fs.createReadStream('my-other-tarball.tar').pipe(tar.extract('./my-other-directory'))
```

Untuk mengabaikan berbagai file saat mengemas atau mengekstraksi, tambahkan fungsi abaikan ke opsi tersebut. `ignore` juga merupakan alias untuk `filter`. Selain itu, Anda mendapatkan `header` jika Anda menggunakan abaikan saat mengekstrak.
Dengan begitu, Anda juga bisa memfilter berdasarkan metadata.

``` js
var pack = tar.pack('./my-directory', {
  ignore: function(name) {
    return path.extname(name) === '.bin' // ignore .bin files when packing
  }
})

var extract = tar.extract('./my-other-directory', {
  ignore: function(name) {
    return path.extname(name) === '.bin' // ignore .bin files inside the tarball when extracing
  }
})

var extractFilesDirs = tar.extract('./my-other-other-directory', {
  ignore: function(_, header) {
    // pass files & directories, ignore e.g. symlinks
    return header.type !== 'file' && header.type !== 'directory'
  }
})
```

Anda juga dapat menentukan entri mana yang akan dikemas menggunakan opsi `entries`

```js
var pack = tar.pack('./my-directory', {
  entries: ['file1', 'subdir/file2'] // only the specific entries will be packed
})
```

Jika Anda ingin mengubah header saat mengemas/mengekstraksi, tambahkan fungsi peta ke opsi

``` js
var pack = tar.pack('./my-directory', {
  map: function(header) {
    header.name = 'prefixed/'+header.name
    return header
  }
})

var extract = tar.extract('./my-directory', {
  map: function(header) {
    header.name = 'another-prefix/'+header.name
    return header
  }
})
```

Demikian pula, Anda dapat menggunakan `mapStream` jika Anda ingin mengubah aliran file input/output

``` js
var pack = tar.pack('./my-directory', {
  mapStream: function(fileStream, header) {
    // NOTE: the returned stream HAS to have the same length as the input stream.
    // If not make sure to update the size in the header passed in here.
    if (path.extname(header.name) === '.js') {
      return fileStream.pipe(someTransform)
    }
    return fileStream;
  }
})

var extract = tar.extract('./my-directory', {
  mapStream: function(fileStream, header) {
    if (path.extname(header.name) === '.js') {
      return fileStream.pipe(someTransform)
    }
    return fileStream;
  }
})
```

Atur `options.fmode` dan `options.dmode` untuk memastikan bahwa file/direktori yang diekstrak memiliki mode yang sesuai

``` js
var extract = tar.extract('./my-directory', {
  dmode: parseInt(555, 8), // all dirs should be readable
  fmode: parseInt(444, 8) // all files should be readable
})
```

Akan berguna untuk menggunakan `dmode` dan `fmode` jika Anda mengemas/membongkar tarball antara *nix/windows untuk memastikan bahwa semua file/direktori yang dibongkar dapat dibaca.

Atau, Anda dapat mengatur `options.readable` dan/atau `options.writable` untuk mengatur dmode dan fmode agar dapat dibaca/ditulis.

``` js
var extract = tar.extract('./my-directory', {
  readable: true, // all dirs and files should be readable
  writable: true, // all dirs and files should be writable
})
```

Atur `options.strict` ke `false` jika Anda ingin mengabaikan kesalahan karena jenis entri yang tidak didukung (seperti file perangkat)

Untuk membedakan symlink (kemas konten symlink, bukan tautan itu sendiri) atur `options.dereference` ke `true`.

## <a name="copy-a-directory"></a>Menyalin direktori

Menyalin direktori dengan izin dan mtime utuh semudah

``` js
tar.pack('source-directory').pipe(tar.extract('dest-directory'))
```

## <a name="interaction-with-tar-stream"></a>Berinteraksi dengan [`tar-stream`](https://github.com/mafintosh/tar-stream)

Gunakan `finalize: false` dan pengait `finish` untuk membiarkan aliran paket terbuka untuk entri lebih lanjut (lihat [`tar-stream#pack`](https://github.com/mafintosh/tar-stream#packing)), dan gunakan `pack` untuk meneruskan aliran paket yang ada.

``` js
var mypack = tar.pack('./my-directory', {
  finalize: false,
  finish: function(sameAsMypack) {
    mypack.entry({name: 'generated-file.txt'}, "hello")
    tar.pack('./other-directory', {
      pack: sameAsMypack
    })
  }
})
```


## <a name="performance"></a>Performa

Mengemas dan mengekstrak 6,1 GB dengan 2496 direktori dan 2398 file menghasilkan hasil berikut di Macbook Air saya.
[Lihat tolok ukur di sini](https://gist.github.com/mafintosh/8102201)

* tar-fs: 34,261 detik
* [node-tar](https://github.com/isaacs/node-tar): 366,123 detik (atau 10x lebih lambat)

## <a name="license"></a>Lisensi

MIT
