---
ms.openlocfilehash: 4f36d4681facd228c63b48050973040e9785d30f
ms.sourcegitcommit: e739004291428ce83f14b9d49f1e9dfaa3762dde
ms.translationtype: HT
ms.contentlocale: id-ID
ms.lasthandoff: 02/05/2022
ms.locfileid: "138051226"
---

<a name="microsoft-authentication-library-for-javascript-msaljs"></a>Pustaka Autentikasi Microsoft untuk JavaScript (MSAL.js)
=========================================================

| [Memulai](https://docs.microsoft.com/azure/active-directory/develop/guidedsetups/active-directory-javascriptspa)| [Dokumen AAD](https://aka.ms/aaddevv2) | [Referensi Pustaka](https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal.html) | [Dukungan](README.md#community-help-and-support) | [Sampel](https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/Samples)
| --- | --- | --- | --- | --- |

⚠️⚠️⚠️ Pustaka ini tidak lagi menerima fitur baru dan hanya akan menerima perbaikan bug dan keamanan penting. Semua aplikasi baru harus menggunakan [@azure/msal-browser](https://www.npmjs.com/package/@azure/msal-browser) sebagai gantinya. ⚠️⚠️⚠️

MSAL untuk JavaScript memungkinkan aplikasi web JavaScript sisi klien, berjalan di browser web, untuk mengautentikasi pengguna menggunakan akun kerja dan sekolah [Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/v2-overview) (AAD), akun pribadi Microsoft (MSA), dan IdP sosial seperti Facebook, Google, LinkedIn, akun Microsoft, dll. melalui layanan [Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-overview#identity-providers). MSAL untuk JavaScript juga memungkinkan aplikasi Anda mendapatkan token untuk mengakses layanan [Cloud Microsoft](https://www.microsoft.com/enterprise) seperti [Microsoft Graph](https://graph.microsoft.io).

[![versi npm](https://img.shields.io/npm/v/msal.svg?style=flat)](https://www.npmjs.com/package/msal)
[![versi npm](https://img.shields.io/npm/dm/msal.svg)](https://nodei.co/npm/msal/)
[![codecov](https://codecov.io/gh/AzureAD/microsoft-authentication-library-for-js/branch/dev/graph/badge.svg?flag=msal-core)](https://codecov.io/gh/AzureAD/microsoft-authentication-library-for-js)

## <a name="installation"></a>Penginstalan

### <a name="via-npm"></a>Melalui NPM:

    npm install msal

## <a name="via-cdn"></a>Melalui CDN:

<!-- CDN_LATEST -->
```html
<script type="text/javascript" src="https://alcdn.msauth.net/lib/1.4.11/js/msal.min.js"></script>
```

[Detail lengkap dan praktik terbaik](https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/dev/lib/msal-core/docs/cdn.md) untuk penggunaan CDN tersedia di dokumentasi kami.

## <a name="what-to-expect-from-this-library"></a>Yang Akan Anda Dapatkan Dari Pustaka Ini
Dukungan Msal pada Javascript adalah kumpulan dari pustaka. `msal-core` atau hanya sekedar `msal`, adalah pustaka inti agnostik kerangka kerja. Setelah inti 1.x+ kami stabil, kami akan menghadirkan pustaka `msal-angular` kami dengan peningkatan 1.x terbaru.  Kami berencana untuk menghentikan dukungan untuk `msal-angularjs` berdasarkan tren penggunaan kerangka kerja dan pustaka yang menunjukkan adopsi Angular 2+ yang meningkat, bukan Angular 1x. Setelah pustaka kami saat ini memenuhi standar, kami akan mulai menyeimbangkan permintaan fitur baru, dengan platform baru seperti `react` dan `node.js`.

Tujuan kami adalah untuk berkomunikasi dengan sangat baik dengan komunitas dan mempertimbangkan pendapat komunitas. Kami ingin mendapatkan jadwal rilis minor bulanan, dengan patch yang dihadirkan sesering yang diperlukan.  Tingkat komunikasi, perencanaan, dan granuralitas yang ingin kami capai masih dalam proses.

Periksa [peta strategi](https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki#roadmap) kami untuk melihat apa yang sedang kami kerjakan dan apa yang akan kami lakukan selanjutnya.

## <a name="oauth-20-and-the-implicit-flow"></a>OAuth 2.0 dan Alur Implisit

Msal menerapkan [Alur Izin Implisit](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-implicit-grant-flow), seperti yang ditentukan oleh protokol OAuth 2.0 dan sesuai dengan [OpenID](https://docs.microsoft.com/azure/active-directory/develop/v2-protocols-oidc).

Tujuan kami adalah agar pustaka mengabstraksi protokol dengan cukup sehingga Anda dapat mendapatkan autentikasi siap pakai, tetapi, penting untuk mengetahui dan memahami alur implisit dari perspektif keamanan.
Alur implisit berjalan dalam konteks browser web yang tidak dapat mengelola rahasia klien dengan aman. Alur implisit dioptimalkan untuk aplikasi satu halaman dan memiliki satu lompatan yang lebih sedikit antara klien dan server sehingga token dikembalikan langsung ke browser. Aspek-aspek ini membuat alur implisit menjadi kurang aman.
Masalah keamanan ini diatasi sesuai dengan praktik standar seperti- penggunaan token berumur pendek (sehingga tidak ada token refresh yang dikembalikan), pustaka yang memerlukan URI pengalihan terdaftar untuk aplikasi, pustaka yang mencocokkan permintaan dan respons dengan nonce unik dan parameter status.

## <a name="cache-storage"></a>Penyimpanan Cache

Kami menawarkan dua metode penyimpanan untuk Msal, `localStorage` dan `sessionStorage`.  Rekomendasi kami adalah menggunakan `sessionStorage` karena lebih aman dalam menyimpan token yang diperoleh oleh pengguna Anda, tetapi `localStorage` akan memberi Anda Akses Menyeluruh di seluruh tab dan sesi pengguna.  Kami mendorong Anda untuk menjelajahi opsi dan membuat keputusan terbaik untuk aplikasi Anda.

### <a name="forcerefresh-to-skip-cache"></a>forceRefresh untuk melewati cache
Jika Anda ingin melewati token yang disimpan dan menuju ke server, teruskan boolean `forceRefresh` ke objek `AuthenticationParameters` yang digunakan untuk membuat permintaan masuk / token. **PERINGATAN:** Hal ini tidak boleh digunakan secara default, karena dampak performa pada aplikasi Anda.  Mengandalkan cache akan memberi pengguna Anda pengalaman yang lebih baik, dan melewatkan cache hanya boleh digunakan dalam skenario saat Anda mengetahui data cache saat ini tidak memiliki informasi terbaru.  Contoh: Alat admin untuk menambahkan peran ke pengguna yang perlu mendapatkan token baru dengan peran pembaruan.

## <a name="usage"></a>Penggunaan
Contoh di bawah ini memandu Anda melalui cara memasukkan pengguna dan memperoleh token yang akan digunakan untuk Api Microsoft Graph.

#### <a name="prerequisites"></a>Prasyarat

Sebelum menggunakan MSAL.js, Anda harus [mendaftarkan aplikasi di Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/quickstart-register-app) guna mendapatkan `clientId` yang valid untuk konfigurasi, dan untuk mendaftarkan rute tempat aplikasi Anda akan menerima lalu lintas pengalihan.

#### <a name="1-instantiate-the-useragentapplication"></a>1. Membuat UserAgentApplication

`UserAgentApplication` dapat dikonfigurasi dengan berbagai opsi berbeda, yang dirinci di [Wiki](https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/MSAL.js-1.0.0-api-release#configuration-options) kami, tetapi satu-satunya parameter yang diperlukan adalah `auth.clientId`.

Setelah membuat instans, jika Anda berencana menggunakan alur pengalihan di MSAL 1.2.x atau yang lebih lama (`loginRedirect` dan `acquireTokenRedirect`), Anda harus mendaftarkan penangan panggilan balik menggunakan `handleRedirectCallback(authCallback)` tempat `authCallback = function(AuthError, AuthResponse)` berada. Pada MSAL 1.3.0, ini bersifat opsional. Fungsi panggilan balik dipanggil setelah permintaan autentikasi diselesaikan dengan sukses atau gagal. Hal ini tidak diperlukan untuk alur popup karena alur popup mengembalikan promises.

```JavaScript
    import * as Msal from "msal";
    // if using cdn version, 'Msal' will be available in the global scope

    const msalConfig = {
        auth: {
            clientId: 'your_client_id'
        }
    };

    const msalInstance = new Msal.UserAgentApplication(msalConfig);

    msalInstance.handleRedirectCallback((error, response) => {
        // handle redirect response or error
    });

```

Untuk detail tentang opsi konfigurasi, baca [Menginisialisasi aplikasi klien dengan MSAL.js](https://docs.microsoft.com/azure/active-directory/develop/msal-js-initializing-client-applications).

#### <a name="2-login-the-user"></a>2. Memasukkan pengguna

Aplikasi Anda harus memasukkan pengguna dengan metode `loginPopup` atau `loginRedirect` untuk menetapkan konteks pengguna.

Saat metode masuk dipanggil dan autentikasi pengguna diselesaikan oleh layanan Azure Active Directory, [token id](https://docs.microsoft.com/azure/active-directory/develop/id-tokens) didapatkan yang digunakan untuk mengidentifikasi pengguna dengan beberapa informasi dasar.

Saat Anda memasukkan pengguna, Anda dapat memberikan cakupan yang dapat disetujui sebelumnya oleh pengguna saat masuk, tetapi, hal ini tidak diperlukan. Perhatikan bahwa menyetujui cakupan saat masuk, tidak menghasilkan access_token untuk cakupan ini, tetapi memberi Anda kesempatan untuk mendapatkan token secara diam-diam dengan cakupan yang diteruskan ini, tanpa interaksi lebih lanjut dari pengguna.

Hal ini merupakan praktik terbaik untuk hanya meminta cakupan yang Anda butuhkan saat Anda membutuhkannya, konsep yang disebut persetujuan dinamis. Meskipun hal ini dapat menciptakan persetujuan yang lebih interaktif bagi pengguna di aplikasi Anda, hal ini juga mengurangi penurunan pengguna yang mungkin merasa tidak nyaman saat memberikan daftar izin yang besar untuk fitur yang belum mereka gunakan.

Azure Active Directory hanya akan mengizinkan Anda untuk mendapatkan persetujuan untuk 3 sumber daya sekaligus, meskipun Anda dapat meminta banyak cakupan dalam satu sumber daya.
Saat pengguna membuat permintaan masuk, Anda dapat meneruskan beberapa sumber daya dan cakupannya yang sesuai karena Azure Active Directory mengeluarkan idToken sebelum menyetujui cakupan tersebut. Tetapi, panggilan acquireToken hanya valid untuk satu sumber daya / beberapa cakupan. Jika Anda perlu mengakses beberapa sumber daya, lakukan panggilan acquireToken terpisah per sumber daya.

```JavaScript
   var loginRequest = {
       scopes: ["user.read", "mail.send"] // optional Array<string>
   };

    msalInstance.loginPopup(loginRequest)
        .then(response => {
            // handle response
        })
        .catch(err => {
            // handle error
        });

```

##### <a name="ssosilent"></a>ssoSilent

Jika Anda yakin bahwa pengguna memiliki sesi yang aktif dan ingin menetapkan konteks pengguna tanpa meminta interaksi, Anda dapat memanggil `ssoSilent` dengan `loginHint` atau `sid` (tersedia sebagai [klaim opsional](https://docs.microsoft.com/azure/active-directory/develop/active-directory-optional-claims) ) dan MSAL akan mencoba melakukan SSO secara diam-diam ke sesi yang aktif dan menetapkan konteks pengguna.

Perhatikan, jika tidak ada sesi aktif untuk `loginHint` atau `sid` tertentu, kesalahan akan muncul, yang harus ditangani dengan memanggil metode masuk interaktif (`loginPopup` atau `loginRedirect`).

Contoh:

```js
const ssoRequest = {
    loginHint: "user@example.com"
};

msalInstance.ssoSilent(ssoRequest)
    .then(response => {
        // session silently established
    })
    .catch(error => {
        // handle error by invoking an interactive login method
        msalInstance.loginPopup(ssoRequest);
    });
```

#### <a name="3-get-an-access-token-to-call-an-api"></a>3. Mendapatkan token akses untuk memanggil API

Di MSAL, Anda dapat mendapatkan token akses untuk API yang perlu dipanggil oleh aplikasi Anda menggunakan metode `acquireTokenSilent` yang membuat permintaan secara diam-diam (tanpa meminta pengguna dengan antarmuka pengguna) ke Azure Active Directory untuk mendapatkan token akses. Layanan Azure Active Directory kemudian menghasilkan [token akses](https://docs.microsoft.com/azure/active-directory/develop/access-tokens) yang berisi cakupan yang disetujui pengguna untuk memungkinkan aplikasi Anda memanggil API dengan aman.

Anda dapat menggunakan `acquireTokenRedirect` atau `acquireTokenPopup` untuk memulai permintaan interaktif, meskipun praktik terbaik adalah hanya menampilkan pengalaman interaktif jika Anda tidak dapat memperoleh token secara diam-diam karena kesalahan yang diperlukan interaksi. Jika Anda menggunakan panggilan token interaktif, panggilan harus cocok dengan metode masuk yang digunakan dalam aplikasi Anda. (`loginPopup`=> `acquireTokenPopup`, `loginRedirect` => `acquireTokenRedirect`).

Jika panggilan `acquireTokenSilent` gagal dengan kesalahan berjenis `InteractionRequiredAuthError`, Anda harus memulai permintaan interaktif.  Hal ini dapat terjadi karena berbagai alasan termasuk cakupan yang telah dicabut, token yang kedaluwarsa, atau perubahan kata sandi.

`acquireTokenSilent` akan mencari token yang valid dalam cache, dan jika token hampir kedaluwarsa atau tidak ada, secara otomatis akan mencoba merefresh token untuk Anda.

Lihat [Tipe Data Permintaan dan Respons](https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/MSAL.js-1.0.0-api-release#signing-in-and-getting-tokens-with-msaljs) untuk referensi.

```JavaScript
    // if the user is already logged in you can acquire a token
    if (msalInstance.getAccount()) {
        var tokenRequest = {
            scopes: ["user.read", "mail.send"]
        };
        msalInstance.acquireTokenSilent(tokenRequest)
            .then(response => {
                // get access token from response
                // response.accessToken
            })
            .catch(err => {
                // could also check if err instance of InteractionRequiredAuthError if you can import the class.
                if (err.name === "InteractionRequiredAuthError") {
                    return msalInstance.acquireTokenPopup(tokenRequest)
                        .then(response => {
                            // get access token from response
                            // response.accessToken
                        })
                        .catch(err => {
                            // handle error
                        });
                }
            });
    } else {
        // user is not logged in, you will need to log them in to acquire a token
    }
```

#### <a name="4-use-the-token-as-a-bearer-in-an-http-request-to-call-the-microsoft-graph-or-a-web-api"></a>4. Menggunakan token sebagai token pembawa dalam permintaan untuk memanggil Microsoft Graph atau API Web

```JavaScript
    var headers = new Headers();
    var bearer = "Bearer " + token;
    headers.append("Authorization", bearer);
    var options = {
         method: "GET",
         headers: headers
    };
    var graphEndpoint = "https://graph.microsoft.com/v1.0/me";

    fetch(graphEndpoint, options)
        .then(resp => {
             //do something with response
        });
```

Anda dapat mempelajari detail lebih lanjut tentang fungsionalitas MSAL.js yang didokumentasikan di [Wiki MSAL](https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki) dan menemukan [sampel kode](https://github.com/AzureAD/microsoft-authentication-library-for-js/wiki/Samples) lengkap.

## <a name="security-reporting"></a>Pelaporan Keamanan

Jika Anda menemukan masalah keamanan dengan pustaka atau layanan kami, laporkan ke [secure@microsoft.com](mailto:secure@microsoft.com) dengan sedetail mungkin. Kiriman Anda mungkin memenuhi syarat untuk mendapatkan hadiah melalui program [Microsoft Bounty](http://aka.ms/bugbounty). Jangan memposting masalah keamanan ke GitHub Issues atau situs publik lainnya. Kami akan segera menghubungi Anda setelah menerima informasi tersebut. Kami mendorong Anda untuk mendapatkan pemberitahuan kapan insiden keamanan terjadi dengan mengunjungi [halaman ini](https://technet.microsoft.com/security/dd252948) dan berlangganan Peringatan Penasihat Keamanan.

## <a name="license"></a>Lisensi

Hak Cipta (c) Microsoft Corporation.  Hak cipta dilindungi undang-undang. Dilisensikan berdasarkan Lisensi MIT ("Lisensi");

## <a name="we-value-and-adhere-to-the-microsoft-open-source-code-of-conduct"></a>Kami Menghargai dan Mematuhi Tata Tertib Sumber Terbuka Microsoft

Proyek ini telah mengadopsi [Kode Etik Sumber Terbuka Microsoft](https://opensource.microsoft.com/codeofconduct/). Untuk informasi selengkapnya, lihat [Tanya Jawab Umum Kode Etik](https://opensource.microsoft.com/codeofconduct/faq/) atau hubungi [opencode@microsoft.com](mailto:opencode@microsoft.com) dengan pertanyaan atau komentar lainnya.
